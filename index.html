
<!DOCTYPE html>
<html>
<head>
    <title>My App</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="aoao.css">
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
</head>


<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Home -->
    <div class="content" id="home-container">
        <div class="profile-card">
            <h2 class="profile-name" id="username"> –≤–∑—è—Ç—å –∏–∑ —Ç–≥ </h2>
            <p class="userID" id="user_id"> 0000    </p>
            <div class="profile-stats">
                <div class="profile-stat">üíé <span id="balance"></span></div>
                <div class="profile-stat">‚≠ê <span id="rating"></span></div>
                <div class="profile-stat">üèÜ <span id="league"></span></div>
            </div>
        </div>

        <div class="energy-card">
            <div class="energy-header">
                <span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                <span id="energy-value"></span>
            </div>
            <div class="energy-bar">
                <div class="energy-fill" id="energy-fill"></div>
            </div>
            <button class="energy-btn" onclick="refillEnergy()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é</button>
        </div>


        <div class="tasks-card">
            <h3 class="tasks-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h3>
            <div class="task completed">
                <input type="checkbox" class="task-checkbox" checked>
                <div class="task-label">–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤</div>
                <div class="task-reward">+20 ‚ö°</div>
            </div>
            <div class="task completed">
                <input type="checkbox" class="task-checkbox" checked>
                <div class="task-label">–í—ã–ø–æ–ª–Ω–∏—Ç—å 3 –∑–∞–¥–∞—á–∏</div>
                <div class="task-reward">+15 üíé</div>
            </div>
            <div class="task">
                <input type="checkbox" class="task-checkbox">
                <div class="task-label">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</div>
                <div class="task-reward">+50 üíé</div>
            </div>
        </div>

        <div class="tasks-card">
            <h3 class="tasks-title">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h3>
            <div class="product">
                <div class="product-name" onclick="updateResources(50, 0)">–ë—É—Å—Ç–µ—Ä —ç–Ω–µ—Ä–≥–∏–∏</div>
                <div class="product-price">50 üíé</div>
                <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Tasks -->
    <div class="content tasks-container" id="tasks-container">
        <div class="tasks-card">
            <h3 class="tasks-title">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
            <div class="task">
                <input type="checkbox" class="task-checkbox">
                <div class="task-label">–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç WebApp</div>
                <div class="task-reward">üîπ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</div>
            </div>
            <div class="task">
                <input type="checkbox" class="task-checkbox">
                <div class="task-label">–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é</div>
                <div class="task-reward">üî∏ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</div>
            </div>
            <div class="task completed">
                <input type="checkbox" class="task-checkbox" checked>
                <div class="task-label">–°–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</div>
                <div class="task-reward">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Market -->
    <div class="content market-container" id="market-container">
        <div class="tasks-card">
            <h3 class="tasks-title">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h3>
            <div class="product">
                <div class="product-name">–ë—É—Å—Ç–µ—Ä —ç–Ω–µ—Ä–≥–∏–∏</div>
                <div class="product-price">50 üíé</div>
                <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
            </div>
            <div class="product">
                <div class="product-name">–ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å</div>
                <div class="product-price">200 üíé</div>
                <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="tab-bar">
        <div class="tab active" onclick="switchTab('home')">
            <div class="tab-icon">üè†</div>
            HOME
        </div>
        <div class="tab" onclick="switchTab('tasks')">
            <div class="tab-icon">‚úÖ</div>
            TASKS
        </div>
        <!-- <div class="tab" onclick="switchTab('market')">
            <div class="tab-icon">üõí</div>
            MARKET
        </div> -->
        <div class="tab" onclick="updateResources(50, 0)">
            <div class="tab-icon">üõí</div>
            MARKET
        </div>
    </div>

</body>


<script>
       // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
       let tg = window.Telegram.WebApp;
        tg.expand();
        tg.setBackgroundColor('#1a1a2e');

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
        function updateResources(newEnergy, newCash) {
            const data = {
                energy: newEnergy,
                cash: newCash
            };
            
            Telegram.WebApp.sendData(JSON.stringify(data));
            Telegram.WebApp.close();
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)
        async function fetchUserData() {
            const response = await fetch(`/get_user_data?user_id=${USER_ID}`);
            const data = await response.json();
            
            document.getElementById("cash-display").textContent = data.cash;
            document.getElementById("energy-display").textContent = data.energy;
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
            document.getElementById('home-container').style.display = 'none';
            document.getElementById('tasks-container').style.display = 'none';
            document.getElementById('market-container').style.display = 'none';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            document.getElementById(`${tabName}-container`).style.display = 'block';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }


        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById("username").textContent = tg.initDataUnsafe.user.first_name;
            document.getElementById("user_id").textContent = tg.initDataUnsafe.user.id;


            // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º Home
            switchTab('home');
        });

        

</script>

</html>