<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AVVA Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- Home Page -->
  <div id="home-page" class="page active">
    <div class="header">
      <img id="user-avatar" src="https://via.placeholder.com/60" class="user-avatar" alt="User Avatar">
      <div class="user-info">
        <div class="user-name" id="username">Загрузка...</div>
        <div class="user-id" id="user-id">ID: ---</div>
        <div class="balance-card">
          <i class="fas fa-coins"></i>
          <span id="balance">0</span> AVVA
        </div>
      </div>
    </div>

    <div class="energy-container">
      <div class="energy-wrapper">
        <div class="energy-progress" id="energy-bar">
          <span id="energy-percent">0%</span>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">
        <i class="fas fa-share-alt"></i>
        Витрина
      </div>
      <p class="card-description">
        Здесь пока пусто
      </p>
    </div>
  </div>

  <!-- Teams Page -->
  <div id="teams-page" class="page">
    <div class="header">
      <div class="user-info">
        <div class="user-name">Мои команды</div>
        <div class="user-id">Присоединяйтесь к сообществу</div>
      </div>
    </div>
  </div>

  <!-- Market Page -->
  <div id="market-page" class="page">
    <div class="header">
      <div class="user-info">
        <div class="user-name">NFT Маркет</div>
        <div class="user-id">Покупайте и продавайте</div>
      </div>
    </div>

    <div class="nft-grid">
      <div class="nft-card">
        <div class="nft-image">
          <span class="nft-price"><i class="fas fa-coins"></i> 150</span>
        </div>
        <div class="nft-info">
          <h3 class="nft-title">Редкий NFT</h3>
          <p class="nft-description">Эксклюзивный дизайн для коллекционеров</p>
          <button class="btn btn-primary">
            <i class="fas fa-shopping-cart"></i> Купить
          </button>
        </div>
      </div>

      <div class="nft-card">
        <div class="nft-image">
          <span class="nft-price"><i class="fas fa-coins"></i> 75</span>
        </div>
        <div class="nft-info">
          <h3 class="nft-title">Обычный NFT</h3>
          <p class="nft-description">Доступный каждому</p>
          <button class="btn btn-primary">
            <i class="fas fa-shopping-cart"></i> Купить
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Tasks Page -->
  <div id="tasks-page" class="page">
    <div class="header">
      <div class="user-info">
        <div class="user-name">Задания</div>
        <div class="user-id">Зарабатывайте очки, выполняя задания</div>
      </div>
    </div>
  </div>

  <!-- Rating Page -->
  <div id="rating-page" class="page">
    <div class="header">
      <div class="user-info">
        <div class="user-name">Рейтинг игроков</div>
        <div class="user-id">Топ 10 по разным категориям</div>
      </div>
    </div>

    <div class="rating-columns">
      <!-- Колонка по балансу -->
      <div class="rating-column">
        <div class="column-header">
          <i class="fas fa-coins"></i>
          <h3>По балансу</h3>
        </div>
        <div id="cash-rating" class="rating-list">
          <div class="loading">Загрузка...</div>
        </div>
      </div>

      <!-- Колонка по заданиям -->
      <div class="rating-column">
        <div class="column-header">
          <i class="fas fa-tasks"></i>
          <h3>По заданиям</h3>
        </div>
        <div id="tasks-rating" class="rating-list">
          <div class="loading">Загрузка...</div>
        </div>
      </div>

      <!-- Колонка по инвайтам -->
      <div class="rating-column">
        <div class="column-header">
          <i class="fas fa-user-plus"></i>
          <h3>По инвайтам</h3>
        </div>
        <div id="invites-rating" class="rating-list">
          <div class="loading">Загрузка...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Task Details Page -->
  <div id="task-details-page" class="page">
    <div class="header">
      <div class="user-info">
        <div class="user-name">Детали задания</div>
        <div class="user-id">Выполните все шаги</div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">
        <i class="fas fa-share-alt"></i>
        Социальный буст
      </div>
      <div class="badge badge-primary">
        <i class="fas fa-gem"></i>
        Награда: 7 NFT (28 USDT)
      </div>

      <div class="task-steps">
        <div class="task-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <div class="step-title">Подпишитесь на наш канал</div>
            <div class="step-description">Подпишитесь на официальный Telegram канал</div>
          </div>
        </div>
        <div class="task-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <div class="step-title">Сделайте репост</div>
            <div class="step-description">Поделитесь последним постом в своем канале</div>
          </div>
        </div>
        <div class="task-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <div class="step-title">Пригласите друзей</div>
            <div class="step-description">Пригласите 3 друзей в бота</div>
          </div>
        </div>
      </div>

      <div class="btn-group">
        <button class="btn btn-secondary" onclick="switchTab('home')">
          <i class="fas fa-arrow-left"></i> Назад
        </button>
        <button class="btn btn-primary" onclick="showEnergyModal(15)">
          <i class="fas fa-play"></i> Начать
        </button>
      </div>
    </div>
  </div>

  <!-- Energy Modal -->
  <div id="energyModal" class="modal">
    <div class="modal-content">
      <h3 class="modal-title">
        <i class="fas fa-bolt"></i>
        Недостаточно энергии
      </h3>
      <p id="requiredEnergyText" class="modal-text"></p>
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="closeModal('energyModal')">
          Отмена
        </button>
        <button class="btn btn-primary" onclick="window.Telegram.WebApp.close()">
          <i class="fas fa-coins"></i> Пополнить
        </button>
      </div>
    </div>
  </div>

  <!-- Confirm AVVA Modal -->
  <div id="confirmAvvaModal" class="modal">
    <div class="modal-content">
      <h3 class="modal-title">
        <i class="fas fa-exclamation-triangle"></i>
        Подтверждение списания
      </h3>
      <p id="confirmAvvaText" class="modal-text"></p>
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="closeModal('confirmAvvaModal')">
          <i class="fas fa-times"></i> Отмена
        </button>
        <button id="confirmAvvaBtn" class="btn btn-primary">
          <i class="fas fa-check"></i> Подтвердить
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav-container">
    <div class="bottom-nav">
      <div class="nav-item active" onclick="switchTab('home')">
        <i class="fas fa-gamepad"></i>
        <span>Игра</span>
      </div>
      <div class="nav-item" onclick="switchTab('tasks')">
        <i class="fas fa-tasks"></i>
        <span>Задания</span>
      </div>
      <div class="nav-item" onclick="switchTab('teams')">
        <i class="fas fa-users"></i>
        <span>Команды</span>
      </div>
      <div class="nav-item" onclick="switchTab('rating')">
        <i class="fas fa-trophy"></i>
        <span>Рейтинг</span>
      </div>
      <div class="nav-item" onclick="switchTab('market')">
        <i class="fas fa-shopping-bag"></i>
        <span>Маркет</span>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>